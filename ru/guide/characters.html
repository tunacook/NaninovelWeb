<!DOCTYPE html>
<html lang="ru-RU">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Персонажи | Naninovel</title>
    <meta name="generator" content="VuePress 1.4.1">
    <link rel="icon" href="assets/img/logo.png">
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="assets/icons/apple-touch-icon-152x152.png">
    <link rel="mask-icon" href="assets/icons/safari-pinned-tab.svg" color="#3eaf7c">
    <meta name="description" content="Расширение игрового движка Unity для создания визуальных новелл.">
    <meta name="theme-color" content="#4985c2">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="og:image" content="assets/img/og.jpg">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="msapplication-TileImage" content="assets/icons/msapplication-icon-144x144.png">
    <meta name="msapplication-TileColor" content="#000000">
    <meta name="google-site-verification" content="cdvgJ2XFFbaGErDKJtTbFj9u9frfReZ9rzUnsf9F6nI">
    <link rel="preload" href="/assets/css/0.styles.d7705860.css" as="style"><link rel="preload" href="/assets/js/app.ed633454.js" as="script"><link rel="preload" href="/assets/js/4.574e50c4.js" as="script"><link rel="preload" href="/assets/js/106.35a997b1.js" as="script"><link rel="prefetch" href="/assets/js/10.1583587b.js"><link rel="prefetch" href="/assets/js/100.59ca4f8f.js"><link rel="prefetch" href="/assets/js/101.a87a79a8.js"><link rel="prefetch" href="/assets/js/102.b2dba5c1.js"><link rel="prefetch" href="/assets/js/103.28c29674.js"><link rel="prefetch" href="/assets/js/104.59efad91.js"><link rel="prefetch" href="/assets/js/105.49c7f735.js"><link rel="prefetch" href="/assets/js/107.a87d984c.js"><link rel="prefetch" href="/assets/js/108.8dae5b75.js"><link rel="prefetch" href="/assets/js/109.456af071.js"><link rel="prefetch" href="/assets/js/11.2c2cfc43.js"><link rel="prefetch" href="/assets/js/110.9986b391.js"><link rel="prefetch" href="/assets/js/111.12306253.js"><link rel="prefetch" href="/assets/js/112.45137e02.js"><link rel="prefetch" href="/assets/js/113.bde95164.js"><link rel="prefetch" href="/assets/js/114.7b36d935.js"><link rel="prefetch" href="/assets/js/115.f9f8053e.js"><link rel="prefetch" href="/assets/js/116.f581e46a.js"><link rel="prefetch" href="/assets/js/117.92daf5df.js"><link rel="prefetch" href="/assets/js/118.7ff1ce6a.js"><link rel="prefetch" href="/assets/js/119.9ef0aa59.js"><link rel="prefetch" href="/assets/js/12.23f2821c.js"><link rel="prefetch" href="/assets/js/120.c07ef279.js"><link rel="prefetch" href="/assets/js/121.e57af68a.js"><link rel="prefetch" href="/assets/js/122.3971b0e1.js"><link rel="prefetch" href="/assets/js/123.1913f466.js"><link rel="prefetch" href="/assets/js/124.ee3f402a.js"><link rel="prefetch" href="/assets/js/125.92fe319a.js"><link rel="prefetch" href="/assets/js/126.992ea8bb.js"><link rel="prefetch" href="/assets/js/127.cbf742c7.js"><link rel="prefetch" href="/assets/js/128.5d3b5278.js"><link rel="prefetch" href="/assets/js/129.fdb58bf3.js"><link rel="prefetch" href="/assets/js/13.671125a4.js"><link rel="prefetch" href="/assets/js/130.cc18400a.js"><link rel="prefetch" href="/assets/js/131.f6d2d428.js"><link rel="prefetch" href="/assets/js/132.24414bca.js"><link rel="prefetch" href="/assets/js/133.e1b6dbee.js"><link rel="prefetch" href="/assets/js/134.da8f8ef5.js"><link rel="prefetch" href="/assets/js/135.be2ee859.js"><link rel="prefetch" href="/assets/js/136.db129f4c.js"><link rel="prefetch" href="/assets/js/137.68f58f64.js"><link rel="prefetch" href="/assets/js/138.6044b2df.js"><link rel="prefetch" href="/assets/js/139.5c64c735.js"><link rel="prefetch" href="/assets/js/14.878271a7.js"><link rel="prefetch" href="/assets/js/140.180a2926.js"><link rel="prefetch" href="/assets/js/141.e0b7e889.js"><link rel="prefetch" href="/assets/js/142.f015ec23.js"><link rel="prefetch" href="/assets/js/143.cc479828.js"><link rel="prefetch" href="/assets/js/144.0f75875a.js"><link rel="prefetch" href="/assets/js/145.0185781c.js"><link rel="prefetch" href="/assets/js/146.3895b65e.js"><link rel="prefetch" href="/assets/js/147.fc2b25d6.js"><link rel="prefetch" href="/assets/js/148.3f94c257.js"><link rel="prefetch" href="/assets/js/149.89d2df39.js"><link rel="prefetch" href="/assets/js/15.826d249a.js"><link rel="prefetch" href="/assets/js/150.c3e2c8a0.js"><link rel="prefetch" href="/assets/js/151.b64fbcb1.js"><link rel="prefetch" href="/assets/js/152.1d74084c.js"><link rel="prefetch" href="/assets/js/153.a65b898d.js"><link rel="prefetch" href="/assets/js/154.95bbb9a4.js"><link rel="prefetch" href="/assets/js/155.5bcc0779.js"><link rel="prefetch" href="/assets/js/156.6bcb0409.js"><link rel="prefetch" href="/assets/js/157.3d792838.js"><link rel="prefetch" href="/assets/js/158.9a6ab162.js"><link rel="prefetch" href="/assets/js/159.ce4a6847.js"><link rel="prefetch" href="/assets/js/16.7559e037.js"><link rel="prefetch" href="/assets/js/160.fcbf0b27.js"><link rel="prefetch" href="/assets/js/161.bac78ad4.js"><link rel="prefetch" href="/assets/js/162.75fde230.js"><link rel="prefetch" href="/assets/js/163.4be9c51a.js"><link rel="prefetch" href="/assets/js/164.f6ead4f1.js"><link rel="prefetch" href="/assets/js/165.32a0d39b.js"><link rel="prefetch" href="/assets/js/166.c167cfc6.js"><link rel="prefetch" href="/assets/js/167.603f1735.js"><link rel="prefetch" href="/assets/js/168.2b5ddfe5.js"><link rel="prefetch" href="/assets/js/169.bb6278fb.js"><link rel="prefetch" href="/assets/js/17.e54cb602.js"><link rel="prefetch" href="/assets/js/170.186e30d5.js"><link rel="prefetch" href="/assets/js/171.76e713dc.js"><link rel="prefetch" href="/assets/js/172.eb96ca9c.js"><link rel="prefetch" href="/assets/js/173.519711b8.js"><link rel="prefetch" href="/assets/js/174.0ede1906.js"><link rel="prefetch" href="/assets/js/175.5a315c9c.js"><link rel="prefetch" href="/assets/js/176.0d2723e2.js"><link rel="prefetch" href="/assets/js/177.e5537389.js"><link rel="prefetch" href="/assets/js/178.317eee9e.js"><link rel="prefetch" href="/assets/js/179.6f0662df.js"><link rel="prefetch" href="/assets/js/18.df24a26f.js"><link rel="prefetch" href="/assets/js/180.502aafb6.js"><link rel="prefetch" href="/assets/js/181.d95e5567.js"><link rel="prefetch" href="/assets/js/182.6c4cdff2.js"><link rel="prefetch" href="/assets/js/183.346c33d6.js"><link rel="prefetch" href="/assets/js/184.4a93101c.js"><link rel="prefetch" href="/assets/js/185.b7135c32.js"><link rel="prefetch" href="/assets/js/186.2f95be58.js"><link rel="prefetch" href="/assets/js/187.dcdcd80e.js"><link rel="prefetch" href="/assets/js/188.5d030208.js"><link rel="prefetch" href="/assets/js/189.54ca4f09.js"><link rel="prefetch" href="/assets/js/19.8a69fd88.js"><link rel="prefetch" href="/assets/js/190.a2ca4932.js"><link rel="prefetch" href="/assets/js/20.3cdcdf82.js"><link rel="prefetch" href="/assets/js/21.02ba440c.js"><link rel="prefetch" href="/assets/js/22.ee4846b9.js"><link rel="prefetch" href="/assets/js/23.0ad69c98.js"><link rel="prefetch" href="/assets/js/24.af790215.js"><link rel="prefetch" href="/assets/js/25.dd087948.js"><link rel="prefetch" href="/assets/js/26.9ffea011.js"><link rel="prefetch" href="/assets/js/27.8991e171.js"><link rel="prefetch" href="/assets/js/28.5fc0c1f6.js"><link rel="prefetch" href="/assets/js/29.69dea2c5.js"><link rel="prefetch" href="/assets/js/3.105e82fb.js"><link rel="prefetch" href="/assets/js/30.84afa224.js"><link rel="prefetch" href="/assets/js/31.fb78c3bb.js"><link rel="prefetch" href="/assets/js/32.b4a75470.js"><link rel="prefetch" href="/assets/js/33.9989edb6.js"><link rel="prefetch" href="/assets/js/34.18e08630.js"><link rel="prefetch" href="/assets/js/35.81457067.js"><link rel="prefetch" href="/assets/js/36.2cddd174.js"><link rel="prefetch" href="/assets/js/37.cbd757a9.js"><link rel="prefetch" href="/assets/js/38.eb8269e0.js"><link rel="prefetch" href="/assets/js/39.d50286a1.js"><link rel="prefetch" href="/assets/js/40.073784f5.js"><link rel="prefetch" href="/assets/js/41.8e817bbf.js"><link rel="prefetch" href="/assets/js/42.29dc5577.js"><link rel="prefetch" href="/assets/js/43.d1088ff6.js"><link rel="prefetch" href="/assets/js/44.2b45d81c.js"><link rel="prefetch" href="/assets/js/45.d0e2e3bc.js"><link rel="prefetch" href="/assets/js/46.f4408348.js"><link rel="prefetch" href="/assets/js/47.290a4d63.js"><link rel="prefetch" href="/assets/js/48.41640dc5.js"><link rel="prefetch" href="/assets/js/49.e2b1dda2.js"><link rel="prefetch" href="/assets/js/5.fc480506.js"><link rel="prefetch" href="/assets/js/50.e9b84357.js"><link rel="prefetch" href="/assets/js/51.0d511fc4.js"><link rel="prefetch" href="/assets/js/52.b5a2ec7d.js"><link rel="prefetch" href="/assets/js/53.f934d74d.js"><link rel="prefetch" href="/assets/js/54.6e27bb43.js"><link rel="prefetch" href="/assets/js/55.f558c027.js"><link rel="prefetch" href="/assets/js/56.fdd1fe21.js"><link rel="prefetch" href="/assets/js/57.7417bad1.js"><link rel="prefetch" href="/assets/js/58.038e85a6.js"><link rel="prefetch" href="/assets/js/59.4bf85a09.js"><link rel="prefetch" href="/assets/js/6.43ec3b0a.js"><link rel="prefetch" href="/assets/js/60.a03d10c3.js"><link rel="prefetch" href="/assets/js/61.05acf8d1.js"><link rel="prefetch" href="/assets/js/62.162222cb.js"><link rel="prefetch" href="/assets/js/63.d7e0e38c.js"><link rel="prefetch" href="/assets/js/64.f3720757.js"><link rel="prefetch" href="/assets/js/65.40f4eb56.js"><link rel="prefetch" href="/assets/js/66.7e2accbe.js"><link rel="prefetch" href="/assets/js/67.f5d21b28.js"><link rel="prefetch" href="/assets/js/68.d454f1fd.js"><link rel="prefetch" href="/assets/js/69.9c9ae005.js"><link rel="prefetch" href="/assets/js/7.fee1d66c.js"><link rel="prefetch" href="/assets/js/70.a98be078.js"><link rel="prefetch" href="/assets/js/71.65690e12.js"><link rel="prefetch" href="/assets/js/72.c5d478c0.js"><link rel="prefetch" href="/assets/js/73.3a5e3b86.js"><link rel="prefetch" href="/assets/js/74.3de7e3a5.js"><link rel="prefetch" href="/assets/js/75.e9b5299a.js"><link rel="prefetch" href="/assets/js/76.7be08e9e.js"><link rel="prefetch" href="/assets/js/77.99674d59.js"><link rel="prefetch" href="/assets/js/78.02117fe8.js"><link rel="prefetch" href="/assets/js/79.bed96f91.js"><link rel="prefetch" href="/assets/js/8.69f6938e.js"><link rel="prefetch" href="/assets/js/80.9cbb73d4.js"><link rel="prefetch" href="/assets/js/81.7f088d55.js"><link rel="prefetch" href="/assets/js/82.2f0de198.js"><link rel="prefetch" href="/assets/js/83.b114e6bc.js"><link rel="prefetch" href="/assets/js/84.38b5c465.js"><link rel="prefetch" href="/assets/js/85.7c782782.js"><link rel="prefetch" href="/assets/js/86.6fba7be8.js"><link rel="prefetch" href="/assets/js/87.2de7c205.js"><link rel="prefetch" href="/assets/js/88.f8321695.js"><link rel="prefetch" href="/assets/js/89.f922c244.js"><link rel="prefetch" href="/assets/js/9.e34f63d6.js"><link rel="prefetch" href="/assets/js/90.c1996a35.js"><link rel="prefetch" href="/assets/js/91.96211078.js"><link rel="prefetch" href="/assets/js/92.3430a223.js"><link rel="prefetch" href="/assets/js/93.6b07eb25.js"><link rel="prefetch" href="/assets/js/94.df611173.js"><link rel="prefetch" href="/assets/js/95.47fdaddc.js"><link rel="prefetch" href="/assets/js/96.dd440fb3.js"><link rel="prefetch" href="/assets/js/97.444058b1.js"><link rel="prefetch" href="/assets/js/98.785de482.js"><link rel="prefetch" href="/assets/js/99.d8324130.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.cab874dd.js">
    <link rel="stylesheet" href="/assets/css/0.styles.d7705860.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="https://naninovel.com"><!----> <span class="site-name">Naninovel</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"><div class="nav-item"><a href="/ru/faq/" class="nav-link">
  FAQ
</a></div><div class="nav-item"><a href="/ru/guide/" class="nav-link router-link-active">
  Руководство
</a></div><div class="nav-item"><a href="/ru/api/" class="nav-link">
  Команды
</a></div><div class="nav-item"><a href="/ru/support/" class="nav-link">
  Поддержка
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Язык" class="dropdown-title"><span class="title">Язык</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/guide/characters.html" class="nav-link">
  English
</a></li><li class="dropdown-item"><!----> <a href="/ja/guide/characters.html" class="nav-link">
  日本語
</a></li><li class="dropdown-item"><!----> <a href="/zh/guide/characters.html" class="nav-link">
  中文
</a></li><li class="dropdown-item"><!----> <a href="/ru/guide/characters.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Русский
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/ru/faq/" class="nav-link">
  FAQ
</a></div><div class="nav-item"><a href="/ru/guide/" class="nav-link router-link-active">
  Руководство
</a></div><div class="nav-item"><a href="/ru/api/" class="nav-link">
  Команды
</a></div><div class="nav-item"><a href="/ru/support/" class="nav-link">
  Поддержка
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Язык" class="dropdown-title"><span class="title">Язык</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/guide/characters.html" class="nav-link">
  English
</a></li><li class="dropdown-item"><!----> <a href="/ja/guide/characters.html" class="nav-link">
  日本語
</a></li><li class="dropdown-item"><!----> <a href="/zh/guide/characters.html" class="nav-link">
  中文
</a></li><li class="dropdown-item"><!----> <a href="/ru/guide/characters.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Русский
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Руководство</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/ru/guide/" aria-current="page" class="sidebar-link">Вступление</a></li><li><a href="/ru/guide/compatibility.html" class="sidebar-link">Compatibility</a></li><li><a href="/ru/guide/getting-started.html" class="sidebar-link">Начало работы</a></li><li><a href="/ru/guide/configuration.html" class="sidebar-link">Конфигурация</a></li><li><a href="/ru/guide/naninovel-scripts.html" class="sidebar-link">Naninovel Scripts</a></li><li><a href="/ru/guide/text-printers.html" class="sidebar-link">Text Printers</a></li><li><a href="/ru/guide/characters.html" aria-current="page" class="active sidebar-link">Персонажи</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ru/guide/characters.html#позы" class="sidebar-link">Позы</a></li><li class="sidebar-sub-header"><a href="/ru/guide/characters.html#отображаемые-имена" class="sidebar-link">Отображаемые имена</a></li><li class="sidebar-sub-header"><a href="/ru/guide/characters.html#цвета-сообщений" class="sidebar-link">Цвета сообщений</a></li><li class="sidebar-sub-header"><a href="/ru/guide/characters.html#текстуры-аватаров" class="sidebar-link">Текстуры аватаров</a></li><li class="sidebar-sub-header"><a href="/ru/guide/characters.html#подсветка-говорящего" class="sidebar-link">Подсветка говорящего</a></li><li class="sidebar-sub-header"><a href="/ru/guide/characters.html#синхронизация-движений-губ-со-звуком" class="sidebar-link">Синхронизация движений губ со звуком</a></li><li class="sidebar-sub-header"><a href="/ru/guide/characters.html#привязанный-принтер" class="sidebar-link">Привязанный принтер</a></li><li class="sidebar-sub-header"><a href="/ru/guide/characters.html#спрайтовые-персонажи" class="sidebar-link">Спрайтовые персонажи</a></li><li class="sidebar-sub-header"><a href="/ru/guide/characters.html#нарезанные-спрайты-персонажей" class="sidebar-link">Нарезанные спрайты персонажей</a></li><li class="sidebar-sub-header"><a href="/ru/guide/characters.html#посnойные-персонажи" class="sidebar-link">Послойные персонажи</a></li><li class="sidebar-sub-header"><a href="/ru/guide/characters.html#универсаnьные-персонажи" class="sidebar-link">Универсальные персонажи</a></li><li class="sidebar-sub-header"><a href="/ru/guide/characters.html#персонажи-live2d" class="sidebar-link">Персонажи Live2D</a></li></ul></li><li><a href="/ru/guide/backgrounds.html" class="sidebar-link">Фоны</a></li><li><a href="/ru/guide/transition-effects.html" class="sidebar-link">Transition Effects</a></li><li><a href="/ru/guide/special-effects.html" class="sidebar-link">Special Effects</a></li><li><a href="/ru/guide/audio.html" class="sidebar-link">Аудио</a></li><li><a href="/ru/guide/voicing.html" class="sidebar-link">Voicing</a></li><li><a href="/ru/guide/movies.html" class="sidebar-link">Movies</a></li><li><a href="/ru/guide/choices.html" class="sidebar-link">Выборы</a></li><li><a href="/ru/guide/user-interface.html" class="sidebar-link">User Interface</a></li><li><a href="/ru/guide/save-load-system.html" class="sidebar-link">Save-Load System</a></li><li><a href="/ru/guide/game-settings.html" class="sidebar-link">Game Settings</a></li><li><a href="/ru/guide/input-processing.html" class="sidebar-link">Input Processing</a></li><li><a href="/ru/guide/unlockable-items.html" class="sidebar-link">Unlockable Items</a></li><li><a href="/ru/guide/custom-variables.html" class="sidebar-link">Custom Variables</a></li><li><a href="/ru/guide/script-expressions.html" class="sidebar-link">Script Expressions</a></li><li><a href="/ru/guide/managed-text.html" class="sidebar-link">Managed Text</a></li><li><a href="/ru/guide/localization.html" class="sidebar-link">Localization</a></li><li><a href="/ru/guide/resource-providers.html" class="sidebar-link">Resource Providers</a></li><li><a href="/ru/guide/community-modding.html" class="sidebar-link">Моддинг сообщества</a></li><li><a href="/ru/guide/development-console.html" class="sidebar-link">Development Console</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Программирование</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Расширения</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="персонажи"><a href="#персонажи" class="header-anchor">#</a> Персонажи</h1> <p>Персонажи – это акторы, используемые для показа элементов сцены, размещённых поверх <a href="/ru/guide/backgrounds.html">фонов</a>.</p> <p>Актор персонажа определяется именем, внешностью, видимостью, трансформацией (что включает в себя положение, поворот, масштаб) и направлением взгляда. Он может изменять внешность, видимость, трансформацию и направление взгляда с течением времени.</p> <p>Поведение персонажей может быть настроено с помощью контекстного меню <code>Naninovel -&gt; Configuration -&gt; Characters</code>; доступные варианты см. в <a href="/ru/guide/configuration.html#characters">руководстве по конфигурации</a>. Доступ к менеджеру ресурсов персонажей можно получить с помощью контекстного меню <code>Naninovel -&gt; Resources -&gt; Characters</code>.</p> <p><img src="https://i.gyazo.com/c8a4f7f987621831b4a2ecb3145a4a07.png" alt="Добавление персонажа"></p> <p>В случае, если у вас есть много персонажей и/или внешностей для каждого персонажа, и вам неудобно назначать их все через меню редактора, вы можете просто поместить их в папку <code>Resources/Naninovel/Characters</code>, сгруппированными в папки, соответствующие ID их акторов. Например, чтобы добавить внешнность для актора персонажа с ID &quot;Kohaku&quot;, сохраните текстуры (спрайты) в папке <code>Resources/Naninovel/Characters/Kohaku</code>, и они автоматически будут доступны в сценариях.</p> <p>Вы можете дополнительно организовать ресурсы внешностей с помощью подпапок, если хотите; в этом случае используйте прямой слеш (<code>/</code>) при ссылке на них в скриптах Naninovel. Например, текстура внешности, сохранённая как <code>Resources/Naninovel/Characters/Kohaku/Casual/Angry</code> может быть объявлена в сценариях как <code>Casual/Angry</code>.</p> <p>Также можно использовать <a href="/ru/guide/resource-providers.html#addressable">систему адрессируемых ассетов?</a>, чтобы вручную распределить ресурсы. Чтобы предоставить доступ к ассету, назначьте адрес, равный пути, который вы использовали бы для его объявления с помощью метода, описанного выше, за исключением опущенной части &quot;Resources/&quot;. Например, для объявления внешности &quot;Happy&quot; для персонажа &quot;Kohaku&quot; назначьте ассету следующий адрес: <code>Naninovel/Characters/Kohaku/Happy</code>. Имейте в виду, что адресируемый провайдер по умолчанию не используется в редакторе; вы можете разрешить его, включив свойство <code>Enable Addressable In Editor</code> в меню конфигурации провайдера ресурсов.</p> <p>В сценариях Naninovel персонажи в основном контролируются с помощью команды <a href="/api/#char" target="_blank"><code>@char</code></a>:</p> <div class="language- extra-class"><pre class="language-text"><code>; Вывод персонажа с именем `Sora` с внешностью по умолчанию.
@char Sora

; То же, что и выше, но с применением внешности `Happy`.
@char Sora.Happy

; То же, что и выше, но также позиционируя персонажа на расстоянии 45% от левой границы
; экрана и на 10% от нижней границы; также заставляя его смотреть влево.
@char Sora.Happy look:left pos:45,10
</code></pre></div><h2 id="позы"><a href="#позы" class="header-anchor">#</a> Позы</h2> <p>Каждый персонаж имеет свойство <code>Poses</code>, позволяющее задавать различные именованные состояния(&quot;позы&quot;).</p> <p><img src="https://i.gyazo.com/5b022d32eddb3e721ed036c96f662f5d.png" alt=""></p> <p>Название позы может быть использовано в качестве внешности в команде <a href="/api/#char" target="_blank"><code>@char</code></a> для применения всех параметров, указанных в позе сразу, вместо того, чтобы указывать их по отдельности с помощью команд параметров.</p> <div class="language- extra-class"><pre class="language-text"><code>; Данная поза `SuperAngry` определена для персонажа `Kohaku`,
; применяет все параметры, указанные в состоянии позы.
@char Kohaku.SuperAngry

; То же, что и выше, но с использованием перехода `DropFade` длительностью в 3 секунды.
@char Kohaku.SuperAngry transition:DropFade time:3
</code></pre></div><p>Обратите внимание, что когда поза используется в качестве внешности, вы все еще можете переопределить отдельные параметры, например:</p> <div class="language- extra-class"><pre class="language-text"><code>; Данная поза `SuperAngry` определена для персонажа `Kohaku`,
; применяет все параметры, указанные в состоянии позы,
; за исключением оттенка, который переопределён отдельной командой.
@char Kohaku.SuperAngry tint:#ff45cb
</code></pre></div><h2 id="отображаемые-имена"><a href="#отображаемые-имена" class="header-anchor">#</a> Отображаемые имена</h2> <p>В конфигурации персонажей вы можете установить <code>Display Name</code> для определенных персонажей. При установке отображаемое имя будет выводиться в метке имени в принтере вместо ID персонажа. Это позволяет использовать составные имена персонажей, содержащие пробелы и специальные символы (что не допускается для ID).</p> <p>Для локализации используйте <a href="/ru/guide/managed-text">управляемый текстовый?</a> документ &quot;CharacterNames&quot;, который автоматически создается при запуске задачи генерировать управляемые текстовые ресурсы. Значения из документа &quot;CharacterNames&quot; не будут переопределять значения, заданные в метаданных персонажей, пока они находятся в исходной локали.</p> <p>Можно привязать отображаемое имя к пользовательской переменной, чтобы динамически изменять его на протяжении всей игры с помощью сценариев Naninovel. Чтобы связать отображаемое имя, укажите имя пользовательской переменной, заключенной в фигурные скобки, в меню конфигурации персонажей.</p> <p><img src="https://i.gyazo.com/9743061df462bd809afc45bff20bbb6d.png" alt=""></p> <p>После этого вы можете изменять значение переменной в сценариях, и это будет также изменять отображаемое имя:</p> <div class="language- extra-class"><pre class="language-text"><code>@set PlayerName=&quot;Mistery Man&quot;
Player: ...

@set PlayerName=&quot;Dr. Stein&quot;
Player: You can call me Dr. Stein. ?
</code></pre></div><p>Также можно использовать функцию привязки имени, чтобы позволить игроку выбрать свое отображаемое имя с помощью команды <a href="/api/#input" target="_blank"><code>@input</code></a>:</p> <div class="language- extra-class"><pre class="language-text"><code>@input PlayerName summary:&quot;Choose your name.&quot;
@stop
Player: You can call me {PlayerName}. ?
</code></pre></div><h2 id="цвета-сообщений"><a href="#цвета-сообщений" class="header-anchor">#</a> Цвета сообщений</h2> <p>Если в конфигурации персонажей включена функция <code>Use Character Color</code>, текстовые сообщения принтера и метки имен будут окрашены в указанные цвета, если соответствующий ID персонажа указан в команде <a href="/api/#print" target="_blank"><code>@print</code></a> или общей текстовой строке.</p> <p>В этом видео показано, как использовать отображаемые имена и цвета персонажей.</p> <p></p><div class="video-container"><iframe src="https://www.youtube-nocookie.com/embed/u5B5s" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="allowfullscreen"></iframe></div><p></p> <h2 id="текстуры-аватаров"><a href="#текстуры-аватаров" class="header-anchor">#</a> Текстуры аватаров</h2> <p>Вы можете назначать текстуры аватаров персонажам, используя параметр <code>avatar</code> команды <a href="/api/#char" target="_blank"><code>@char</code></a>. Аватары будут отображаться совместимыми текстовыми принтерами, когда они выводят текстовое сообщение, связанное с этим персонажем. В настоящее время функцию аватаров поддерживают только текстовые принтеры <code>Wide</code> и <code>Chat</code>.</p> <p><img src="https://i.gyazo.com/83c091c08846fa1cab8764a8d4dddeda.png" alt=""></p> <p>Чтобы использовать любой заданный аватар, вы должны сначала добавить его в ресурсы аватара и дать ему имя. Вы можете сделать это с помощью свойства <code>Avatar Resources</code> в меню конфигурации персонажей.</p> <p><img src="https://i.gyazo.com/5a0f10d174aa75ed87da1b472567e40b.png" alt=""></p> <div class="custom-block note"><p class="custom-block-title">ПРИМЕЧАНИЕ</p> <p>Имена аватаров могут быть произвольными и не обязаны содержать существующий ID персонажа или внешность. Это требуется только в том случае, если вы хотите связать аватар с персонажем, чтобы он отображался автоматически.</p></div> <p>Теперь вы можете показать определенную текстуру аватара следующим образом:</p> <div class="language- extra-class"><pre class="language-text"><code>@char CharacaterId avatar:AvatarName
</code></pre></div><p>Чтобы установить аватар по умолчанию для персонажа, дайте имя ресурсу текстуры аватара, который равен <code>CharacterID/Default</code>; например, чтобы установить аватар по умолчанию для персонажа с ID <code>Kohaku</code>, дайте имя ресурсу аватара <code>Kohaku/Default</code>. Заданные аватары по умолчанию будут отображаться автоматически, даже если параметр <code>avatar</code> не указан в командах <a href="/api/#char" target="_blank"><code>@char</code></a>.</p> <p>Кроме того, можно связать аватары с определенными внешностями персонажа, так что когда персонаж будет менять внешность, аватар также автоматически будет меняться. Для этого назовите ресурсы аватара в следующем формате: <code>CharacterID/CharacterAppearance</code>, где <code>CharacterAppearance</code> – это имя внешности, которой сопоставляется ресурс аватара.</p> <p>Обратите внимание, что <strong>аватары не связаны напрямую с внешностью персонажа</strong> и не должны рассматриваться как способ показать характер на сцене. Внешность, указанная в диспетчере ресурсов персонажа, является фактическим представлением персонажа на сцене. Аватары – это автономная функция, которая &quot;вводит&quot; произвольное изображение в совместимый текстовый принтер.</p> <p>Можно показать только аватар персонажа внутри текстового принтера, но скрыть самого персонажа, установив параметр <code>visible</code> команды <a href="/api/#char" target="_blank"><code>@char</code></a> в значение <code>false</code>, например:</p> <div class="language- extra-class"><pre class="language-text"><code>@char CharacaterId visible:false
</code></pre></div><p>Если вы постоянно меняете аватары, в то время как сам персонаж должен оставаться скрытым, вы можете отключить <code>Auto Show On Modify</code> в меню конфигурации персонажей; когда он отключен, вам не нужно будет указывать <code>visible:false</code>, чтобы изменить какие-либо параметры персонажа, пока он скрыт.</p> <h2 id="подсветка-говорящего"><a href="#подсветка-говорящего" class="header-anchor">#</a> Подсветка говорящего</h2> <p>Если этот параметр включен в конфигурации персонажей, он будет окрашивать персонажа в зависимости от того, связано ли с тем последнее напечатанное сообщение.</p> <p></p><div class="video-container"><iframe src="https://www.youtube-nocookie.com/embed/gobowgagdyE" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="allowfullscreen"></iframe></div><p></p> <h2 id="синхронизация-движений-губ-со-звуком"><a href="#синхронизация-движений-губ-со-звуком" class="header-anchor">#</a> Синхронизация движений губ со звуком</h2> <p><a href="/ru/guide/characters.html#generic-characters">Универсальные</a> и <a href="/ru/guide/characters.html#live2d-characters">Live2D</a> реализации персонажей поддерживают так называемую функцию &quot;синхронизации движений губ со звуком&quot;, позволяя управлять анимацией рта персонажа, пока от его имени печатается сообщение, для чего отправляя соответствующие события.</p> <p></p><div class="video-container"><iframe src="https://www.youtube-nocookie.com/embed/fx_YS2ZQGHI" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="allowfullscreen"></iframe></div><p></p> <p>Когда включена функция <a href="/ru/guide/voicing.html#auto-voicing">автоозвучивания?</a>, события синхронизации губ будут управляться голосом за кадром; в противном случае печатные текстовые сообщения активируют события. В последнем случае вам, вероятно, иногда захочется вручную запустить или остановить синхронизацию губ (например, чтобы предотвратить движение рта при печати знаков препинания); в таких случаях используйте команду <a href="/api/#lipsync" target="_blank"><code>@lipSync</code></a>.</p> <p>См. документацию по реализации <a href="/ru/guide/characters.html#generic-characters">универсальных</a> и <a href="/ru/guide/characters.html#live2d-characters">Live2D-</a>персонажей ниже для получения подробной информации о том, как настроить функцию синхронизации губ.</p> <h2 id="привязанный-принтер"><a href="#привязанный-принтер" class="header-anchor">#</a> Привязанный принтер</h2> <p>Существует возможность привязать <a href="/ru/guide/text-printers.html">текстоый принтер</a> с персонажем, используя параметр <code>Linked Printer</code>.</p> <p><img src="https://i.gyazo.com/50ca6b39cd7f708158678339244b1dc4.png" alt=""></p> <p>При подключении принтер будет автоматически использоваться для обработки сообщений, выводимых от имени этого персонажа.</p> <p>Имейте в виду, что команды <a href="/api/#print" target="_blank"><code>@print</code></a> (которые также используются при печати общих текстовых строк) по умолчанию используют привязанные принтеры по умолчанию и скрывают другие видимые принтеры. Когда принтеры привязаны к персонажам, команды печати автоматически изменят текущий видимый и стандартный текстовый принтер, одновременно печатая текст, связанный с соответствующим персонажем. Такое поведение можно предотвратить, отключив свойство <code>Auto Default</code> в меню конфигурации принтера актора; если оно отключено, вам придется вручную показывать/скрывать и переключать принтеры по умолчанию с помощью команд <a href="/api/#printer" target="_blank"><code>@printer</code></a>.</p> <h2 id="спрайтовые-персонажи"><a href="#спрайтовые-персонажи" class="header-anchor">#</a> Спрайтовые персонажи</h2> <p>Спрайтовая реализация акторов персонажей является наиболее распространенной и простой; она использует набор ассетов <a href="https://docs.unity3d.com/Manual/Sprites" target="_blank" rel="noopener noreferrer">спрайтов<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> для представления внешности персонажа. Источником спрайтов могут быть изображения (текстуры) любых форматов, <a href="https://docs.unity3d.com/Manual/ImportingTextures" target="_blank" rel="noopener noreferrer">поддерживаемых Unity<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <h2 id="нарезанные-спрайты-персонажей"><a href="#нарезанные-спрайты-персонажей" class="header-anchor">#</a> Нарезанные спрайты персонажей</h2> <p>Основанная на пакете <a href="https://github.com/Elringus/SpriteDicing" target="_blank" rel="noopener noreferrer">Sprite Dicing<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> с открытым исходным кодом, реализация <code>DicedSpriteCharacter</code> позволяет значительно уменьшить размер сборки и занимаемую текстурами память за счет повторного использования текстурных областей спрайтов персонажей.</p> <p><img src="https://i.gyazo.com/af08d141e7a08b6a8e2ef60c07332bbf.png" alt="Нарезка спрайта"></p> <p>Установите пакет через <a href="https://docs.unity3d.com/Manual/upm-ui.html" target="_blank" rel="noopener noreferrer">менеджер пакетов Unity<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>: откройте окно менеджера пакетов (Window -&gt; Package Manager), нажмите кнопку &quot;+&quot;, выберите &quot;Add package from git URL&quot;, введите <code>https://github.com/Elringus/SpriteDicing.git#package</code> в поле ввода и нажмите кнопку &quot;Add&quot;.</p> <p><video loop="loop" autoplay="autoplay" muted="muted" class="video"><source src="https://i.gyazo.com/b54e9daa9a483d9bf7f74f0e94b2d38a.mp4" type="video/mp4"></video></p> <p>Ассеты <code>DicedSpriteAtlas</code>, содержащие внешности персонажей, используются в качестве ресурсов для нарезанных спрайтов персонажей. Каждая внешность сопоставляется по имени с нарезкой спрайтов, содержащихся в атласе.</p> <p>Имейте в виду, что некоторые свойства метаданных нарезанных спрайтов (например, пиксели на единицу, pivot) управляются ассетом атласа, в то время как значения в конфигурации персонажей применяются к создаваемой текстуре?, используемой для представления фактического спрайта. При изменении свойств атласа не забудьте перестроить его, чтобы изменения вступили в силу.</p> <p><img src="https://i.gyazo.com/3765726bd326bb7a8a03a653f458cd3d.png" alt=""></p> <p>Следующий видеогайд охватывает создание и настройку атласа нарезанного спрайта, добавление нового нарезанного персонажа на основе созданного атласа и управление персонажем из сценария Naninovel.</p> <p></p><div class="video-container"><iframe src="https://www.youtube-nocookie.com/embed/6PdOAOsnhio" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="allowfullscreen"></iframe></div><p></p> <h2 id="посnойные-персонажи"><a href="#посnойные-персонажи" class="header-anchor">#</a> Послойные персонажи</h2> <p>Послойная реализация позволяет создавать персонажей из нескольких спрайтов (слоев), а затем переключать их по отдельности или группами с помощью сценариев Naninovel во время выполнения.</p> <p>Чтобы создать префаб послойного персонажа, используйте контекстное меню <code>Create -&gt; Naninovel -&gt; Character -&gt; Layered</code>. Войдите в <a href="https://docs.unity3d.com/Manual/EditingInPrefabMode.html" target="_blank" rel="noopener noreferrer">режим редактирования префаба<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> для составления слоев. По умолчанию будет создано несколько слоев и групп. Вы можете использовать их или удалить и добавить свои собственные.</p> <p>Каждый дочерний игровой объект корневого объекта префаба с компонентом <a href="https://docs.unity3d.com/Manual/class-SpriteRenderer.html" target="_blank" rel="noopener noreferrer">спрайтового рендерера?<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> считается <em>слоем</em>; другие объекты считаются <em>группами</em>. Помимо организации и трансформации, размещение слоев внутри групп позволит вам выбрать один слой или отключить/включить все слои внутри группы с помощью одного выражения в сценарии Naninovel (подробнее об этом позже).</p> <p>Чтобы скрыть некоторые слои от просмотра по умолчанию, отключите компоненты рендерера спрайтов (а не игровые объекты).</p> <p>Белая рамка поверх префаба используется для описания холста актера, который будет визуализирован в готовую текстуру во время выполнения. Убедитесь, что вы минимизировали пустые области внутри кадра, перемещая слои и группы, чтобы предотвратить потерю памяти на текстуры и обеспечить правильную работу якорей.</p> <p><img src="https://i.gyazo.com/4ff103c27858ac9671ba3b94ab1ade20.png" alt=""></p> <p>Вы можете масштабировать корневой игровой объект, чтобы точно настроить размер актора по умолчанию.</p> <p>При создании послойных изображений персонажей в Photoshop вы можете использовать <a href="https://docs.unity3d.com/Packages/com.unity.2d.psdimporter@3.0/manual/index.html" target="_blank" rel="noopener noreferrer">пакет Unity для импорта PSD<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, чтобы автоматически генерировать префаб персонажа с сохранением всех слоев и их положений. Чтобы сохранить иерархию слоев, обязательно включите опцию <code>Use Layer Grouping</code> в настройках импорта.</p> <p>Не забудьте добавить созданный послойный префаб к ресурсам персонажей (<code>Naninovel -&gt; Resources -&gt; Characters</code>). Выберите &quot;Naninovel.LayeredCharacter&quot; и перетащите префаб в поле &quot;Resource&quot; при настройке записи ресурса.</p> <p>Для управления послойными персонажами в сценариях Naninovel используйте команду <a href="/api/#char" target="_blank"><code>@char</code></a> так же, как и в других реализациях персонажей. Единственное отличие заключается в том, как вы объявляете внешность: вместо одного ID используйте <em>выражение композиции слоёв</em>. Существует три типа выражений:</p> <ul><li>Включить один слой в группе: <code>group&gt;layer</code></li> <li>Включить слой: <code>group+layer</code></li> <li>Отключить слой: <code>group-layer</code></li></ul> <p>Например, рассмотрим персонажа &quot;Miho&quot;, который имеет группу &quot;Body&quot; с тремя слоями: &quot;Uniform&quot;, &quot;SportSuit&quot; и &quot;Pajama&quot;. Чтобы включить слой &quot;Uniform&quot; и отключить все остальные, используйте следующую команду:</p> <div class="language- extra-class"><pre class="language-text"><code>@char Miho.Body&gt;Uniform
</code></pre></div><p>Чтобы включить или отключить слой, не затрагивая другие слои в группе, используйте &quot;+&quot; и &quot;-&quot; соответственно вместо &quot;&gt;&quot;. Вы также можете указать несколько композиционных выражений, разделив их запятыми:</p> <div class="language- extra-class"><pre class="language-text"><code>; Добавить очки, убрать шляпу, выбрать эмоцию &quot;Cool&quot;.
@char CharId.Head/Accessories+BlackGlasses,Head-Hat,Head/Emotions&gt;Cool
</code></pre></div><p>Чтобы выбрать слой вне каких-либо групп (дочерний объект корневого объекта префаба), просто пропустите группу, например:</p> <div class="language- extra-class"><pre class="language-text"><code>; Дан слой &quot;Halo&quot; – дочерний объект корневого объекта префаба, убрать его
@char CharId.-Halo
</code></pre></div><p>Кроме того, можно воздействовать на все слои внутри группы (а также на ее соседей при использовании выборного выражения), опуская имя слоя в выражении композиции:</p> <div class="language- extra-class"><pre class="language-text"><code>; Убрать все слои из группы &quot;Body/Decoration&quot;.
@char CharId.Body/Decoration-

; Добавить все существующие слои.
@char CharId.+

; Даны группы `Poses/Light` и `Poses/Dark` (each containing multiple layers), 
; добавить все спрайты из группы `Light` и убрать все из группы `Dark`.
@char CharId.Poses/Light&gt;
</code></pre></div><p>Приведенные выше выражения будут рекурсивно воздействовать не только на прямых потомков выбранных групп, но и на все слои, содержащиеся в нижележащих группах.</p> <p>Если внешность не задана (например, <code>@char CharId</code> без предварительной настройки внешности), будет использоваться внешность умолчанию; внешность послойных персонажей по умолчанию равна тому, как выглядит послойный префаб в редакторе.</p> <p>Видео ниже демонстрирует, как настраивать послойного персонажа и управлять им с помощью команд Naninovel.</p> <p></p><div class="video-container"><iframe src="https://www.youtube-nocookie.com/embed/Bl3kXrg8tiI" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="allowfullscreen"></iframe></div><p></p> <div class="custom-block note"><p class="custom-block-title">ПРИМЕЧАНИЕ</p> <p>Команда <code>@char Miho.Shoes&gt;</code>, показанная в видео, выбирает группу &quot;Shoes&quot; (отключая все соседние группы), но не скрывает её. Правильная команда для скрытия группы – <code>@char Miho.Shoes-</code>.</p></div> <p>Можно сопоставить композиционные выражения для ключей с помощью свойства <code>Composition Map</code> компонента <code>Layered Actor Behaviour</code>:</p> <p><img src="https://i.gyazo.com/ede5cde3548a3187aa714d3e140750ba.png" alt=""></p> <p>– после этого ключи могут быть использованы для определения внешности послойного персонажа:</p> <div class="language- extra-class"><pre class="language-text"><code>; Соответствует `Body&gt;Uniform,Hair/Back&gt;Straight,Hair/Front&gt;Straight,Shoes&gt;Grey`.
@char Miho.Uniform
; Соответствует `Hair/Back&gt;Straight,Hair/Front&gt;Straight`.
@char Miho.StraightHair
</code></pre></div><p>При редактировании префаба послойного персонажа можно предварительно просмотреть заданные композиционные выражения, щелкнув правой кнопкой мыши по записи выражения и выбрав пункт &quot;Preview Composition&quot;.</p> <p><img src="https://i.gyazo.com/9fb0aeccf4f33245d9f975592ee86dbc.gif" alt=""></p> <p>Имейте в виду, что объекты слоёв не визуализируются непосредственно камерами Unity во время выполнения; вместо этого они визуализируются один раз при каждом изменении композиции (внешности) во временную собранную текстуру, которая затем подается в сетку, видимую для камеры Naninovel. Эта настройка необходима для предотвращения проблем с прорисовкой полупрозрачных элементов и поддержки эффектов анимации перехода.</p> <h2 id="универсаnьные-персонажи"><a href="#универсаnьные-персонажи" class="header-anchor">#</a> Универсальные персонажи</h2> <p>Универсальный персонаж – это наиболее гибкая реализация актора персонажа. Он основан на сборке с компонентом <code>CharacterActorBehaviour</code>, прикрепленным к корневому объекту. Изменения внешности и все остальные параметры персонажей маршрутизируются как <a href="https://docs.unity3d.com/Manual/UnityEvents.html" target="_blank" rel="noopener noreferrer">события Unity<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, позволяя реализовать поведение базового объекта любым удобным вам способом.</p> <p><img src="https://i.gyazo.com/9f799f4152782afb6ab86d3c494f4cc4.png" alt=""></p> <p>Чтобы создать префаб универсального персонажа по шаблону, используйте контекстное меню <code>Create -&gt; Naninovel -&gt; Character -&gt; Generic</code>.</p> <p>Для настройки функции синхронизации губ для универсальных персонажей, используйте события Unity <code>On Started Speaking</code> и <code>On Finished Speaking</code> компонента <code>CharacterActorBehaviour</code>. Когда персонаж становится или перестает быть автором любого печатного сообщения (или, скорее, когда сообщение полностью раскрывается), эти события будут вызваны, позволяя вам вызвать любую логику, такую как запуск или остановка анимации рта контролируемого персонажа. Это подобно тому, как работают события пользовательского интерфейса <code>On Show</code> и <code>On Hide</code>; найти, как они могут быть использованы для управления анимацией, можно в <a href="/ru/guide/user-interface.html#adding-custom-ui">руководстве по настройке UI</a>.</p> <p>Ознакомьтесь со следующим видеоуроком как с примером по настройке 3D-модели в качестве универсального персонажа и внесению изменений внешности в анимацию модели с помощью компонента <a href="https://docs.unity3d.com/Manual/class-AnimatorController.html" target="_blank" rel="noopener noreferrer">Animator<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> компонент.</p> <p>Check the following video tutorial for example on setting up a 3D rigged model as a generic character and routing appearance changes to the rig animations via <a href="https://docs.unity3d.com/Manual/class-AnimatorController.html" target="_blank" rel="noopener noreferrer">Animator<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <p></p><div class="video-container"><iframe src="https://www.youtube-nocookie.com/embed/HPxhR0I1u2Q" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="allowfullscreen"></iframe></div><p></p> <h2 id="персонажи-live2d"><a href="#персонажи-live2d" class="header-anchor">#</a> Персонажи Live2D</h2> <p>Реализация персонажей Live2D использует ассеты, созданные с помощью софта для 2D-моделирования и анимации <a href="https://www.live2d.com" target="_blank" rel="noopener noreferrer">Live2D Cubism<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <p>Чтобы иметь возможность использовать эту реализацию, необходимо сначала установить <a href="https://live2d.github.io/#unity" target="_blank" rel="noopener noreferrer">Live2D Cubism SDK для Unity<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>. Обратитесь к официальной документации Live2D для получения инструкций по установке и использованию.</p> <p>После этого скачайте и импортируйте <a href="https://github.com/Elringus/NaninovelLive2D/raw/master/NaninovelLive2D.unitypackage" target="_blank" rel="noopener noreferrer">пакет расширения Live2D<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <p>Префаб модели Live2D, используемый в качестве ресурса для реализации, должен иметь компонент <code>Live2DController</code>, прикрепленный к корневому объекту. Изменения внешности направляются в компонент аниматора как команды <a href="https://docs.unity3d.com/ScriptReference/Animator.SetTrigger.html" target="_blank" rel="noopener noreferrer">SetTrigger<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, используя внешность как имя триггера?. Например, если у вас есть Live2D-префаб персонажа &quot;Kaori&quot;, и вы хотите вызвать триггер с именем &quot;Surprise&quot;, используйте следующую команду:</p> <div class="language- extra-class"><pre class="language-text"><code>@char Kaori.Surprise
</code></pre></div><p>Обратите внимание, что приведенная выше команда будет только пытаться вызвать <a href="https://docs.unity3d.com/ScriptReference/Animator.SetTrigger.html" target="_blank" rel="noopener noreferrer">SetTrigger<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> с аргументом &quot;Surprise&quot; на контроллере аниматора, прикрепленного к префабу; вы должны самостоятельно составить нижележащую систему <a href="https://docs.unity3d.com/Manual/Animator" target="_blank" rel="noopener noreferrer">аниматора??<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <div class="custom-block warn"><p class="custom-block-title">ВНИМАНИЕ</p> <p>Последняя версия Cubism SDK для Unity работает непосредственно с компонентом <code>Animator</code>; выражения и позы (экспортированные как expression.json и pose.json), которые ранее использовались в Cubism 2.x, теперь <a href="https://docs.live2d.com/cubism-sdk-tutorials/blendexpression" target="_blank" rel="noopener noreferrer">устарели<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> и не поддерживаются расширением Naninovel для Live2D.</p></div> <p>Когда компоненты Live2D <code>CubismLookController</code> и <code>CubismMouthController</code> присутствуют и настроены на префаб модели Live2D, <code>Live2DController</code> может дополнительно использовать их для управления направлением взгляда и анимацией рта (функцией синхронизации губ) персонажа.</p> <p><img src="https://i.gyazo.com/498fe948bc5cbdb4dfc5ebc5437ae6b4.png" alt=""></p> <p>Обратитесь к документации Live2D по <a href="https://docs.live2d.com/cubism-sdk-tutorials/lookat" target="_blank" rel="noopener noreferrer">трекингу глаз<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> и <a href="https://docs.live2d.com/cubism-sdk-tutorials/lipsync" target="_blank" rel="noopener noreferrer">синхронизации губ<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> для получения подробной информации о настройке.</p> <p>Имейте в виду, что <code>Live2DController</code> ожидает игровой объект &quot;Drawables&quot; внутри префаба модели Live2D (создается автоматически при импорте моделей Live2D в Unity); контроллер будет масштабировать этот объект во время выполнения в соответствии с параметром &quot;scale&quot; команд <a href="/api/#char" target="_blank"><code>@char</code></a>. Следовательно, любые локальные значения, заданные в редакторе, будут проигнорированы. Чтобы установить начальный масштаб для префабов Live2D, пожалуйста, используйте масштаб корневого игрового объекта, как [показано в видеогайде].(https://youtu.be/rw_Z69z0pAg?t=353).</p> <p>При установке расширения Live2D в меню конфигурации Naninovel появится пункт &quot;Live2D&quot;, содержащий следующие параметры:</p> <p><img src="https://i.gyazo.com/435a4824f0ce0dd8c9c3f29d457bab24.png" alt=""></p> <p>Слой рендеринга задает слой, применяемый для префабов Live2D, и маску вырезки?, используемую для камер, которые будут рендерить префабы. Поле рендеровой камеры позволяет использовать пользовательскую настройку для камеры рендеринга (камера рендеринга по умолчанию хранится в папке пакетов &quot;Prefabs&quot;). Смещение камеры позволяет смещать камеру рендеринга от рендерируемого префаба; вы можете использовать эти параметры для равномерного позиционирования всех префабов Live2D относительно камеры.</p> <p>Следующий видеогайд охватывает экспорт персонажа Live2D из Cubism Editor, настройку префаба, создание простого аниматора? и управление персонажем из сценария Naninovel.</p> <p></p><div class="video-container"><iframe src="https://www.youtube-nocookie.com/embed/rw_Z69z0pAg" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="allowfullscreen"></iframe></div><p></p> <div class="custom-block example"><p class="custom-block-title">ПРИМЕР</p> <p>Ознакомьтесь с <a href="https://github.com/Elringus/NaninovelLive2D" target="_blank" rel="noopener noreferrer">примером проекта на GitHub<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, где персонаж Live2D используется в Naninovel. Имейте в виду, что ни пакеты Naninovel, ни пакеты Live2D SDK не поставляются вместе с проектом, поэтому после его первого открытия появятся ошибки компиляции; импортируйте Naninovel из Asset Store и Live2D Cubism SDK с их веб-сайта, чтобы решить эти проблемы.</p></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Обновлено:</span> <span class="time">June 29, 2020</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/ru/guide/text-printers.html" class="prev">
        Text Printers
      </a></span> <span class="next"><a href="/ru/guide/backgrounds.html">
        Фоны
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.ed633454.js" defer></script><script src="/assets/js/4.574e50c4.js" defer></script><script src="/assets/js/106.35a997b1.js" defer></script>
  </body>
</html>

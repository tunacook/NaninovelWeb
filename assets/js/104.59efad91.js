(window.webpackJsonp=window.webpackJsonp||[]).push([[104],{356:function(e,a,t){"use strict";t.r(a);var r=t(33),n=Object(r.a)({},(function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"фоны"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#фоны"}},[e._v("#")]),e._v(" Фоны")]),e._v(" "),t("p",[e._v("В отличие от "),t("RouterLink",{attrs:{to:"/ru/guide/characters.html"}},[e._v("персонажей")]),e._v(", фоны – это акторы, используемые для представления "),t("em",[e._v("заднего")]),e._v(" плана сцены: локаций, пейзажей, пейзажей – всего, что всегда должно появляться "),t("em",[e._v("позади")]),e._v(" персонажей.")],1),e._v(" "),t("p",[e._v("Фоновый актор определяется с помощью имени, внешности, видимости и трансформации (такой, как положение, поворот, масштаб). Он может изменять внешность, видимость и трансформироваться с течением времени.")]),e._v(" "),t("p",[e._v("Поведение фонов можно настроить с помощью контекстного меню "),t("code",[e._v("Naninovel -> Configuration -> Backgrounds")]),e._v("; доступные параметры см. в разделе "),t("RouterLink",{attrs:{to:"/ru/guide/configuration.html#backgrounds"}},[e._v("Руководство по конфигурации")]),e._v(". Доступ к менеджеру ресурсов фонов можно получить с помощью контекстного меню "),t("code",[e._v("Naninovel -> Resources -> Backgrounds")]),e._v(".")],1),e._v(" "),t("p",[t("img",{attrs:{src:"https://i.gyazo.com/cccd08280dac72d199ea3465bc167a22.gif",alt:""}})]),e._v(" "),t("p",[e._v("Если у вас много фонов, и их неудобно назначать через меню редактора, можно просто поместить их в папку "),t("code",[e._v("Resources/Naninovel/Backgrounds")]),e._v(', рассортировав их по папкам, соответствующим идентификаторам акторов. Например, чтобы добавить внешность для фонового актора с ID "MainBackground", сохраните текстуры (спрайты) в папке '),t("code",[e._v("Resources/Naninovel/Backgrounds/MainBackground")]),e._v(", и они автоматически будут доступны в сценариях.")]),e._v(" "),t("p",[e._v("Вы можете дополнительно организовать ресурсы внешностей с помощью подпапок, если хотите; в этом случае используйте прямой слеш ("),t("code",[e._v("/")]),e._v(") при ссылке на них в сценариях Naninovel. Например, текстура внешности по адресу "),t("code",[e._v("Resources/Naninovel/Backgrounds/MainBackground/Events/CG251")]),e._v(" может быть объявлена как "),t("code",[e._v("Events/CG251")]),e._v(".")]),e._v(" "),t("p",[e._v("Также можно использовать "),t("RouterLink",{attrs:{to:"/ru/guide/resource-providers.html#addressable"}},[e._v("систему адрессируемых ассетов?")]),e._v(', чтобы вручную распределить ресурсы. Чтобы предоставить доступ к ассету, назначьте адрес, равный пути, который вы использовали бы для его объявления с помощью метода, описанного выше, за исключением опущенной части "Resources/". Например, для объявления внешности "Beach" для фона "MainBackground" назначьте ассету следующий адрес: '),t("code",[e._v("Naninovel/Backgrounds/MainBackground/Beach")]),e._v(". Имейте в виду, что адресируемый провайдер по умолчанию не используется в редакторе; вы можете разрешить его, включив свойство "),t("code",[e._v("Enable Addressable In Editor")]),e._v(" в меню конфигурации провайдера ресурсов.")],1),e._v(" "),t("p",[e._v("В сценариях Naninovel фоны в основном контролируются с помощью команды "),t("a",{attrs:{href:"/api/#back",target:"_blank"}},[t("code",[e._v("@back")])]),e._v(":")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("; Установить `River` как внешность основного фона\n@back River\n\n; То же, что выше, но с использованием эффекта перехода `RadialBlur`\n@back River.RadialBlur\n")])])]),t("p",[e._v('Фоны обрабатываются немного иначе, нежели персонажи, чтобы лучше приспособиться к традиционному течению визуальных новелл. Большую часть времени вы, вероятно, будете иметь одного фонового актора в сцене, который будет постоянно менять внешности. Чтобы избавиться от лишнего повторения одного и того же ID актора в сценариях, можно предоставить только внешность фона и тип перехода (необязательно) в качестве безымянного параметра, что автоматически преобразует актора "MainBackground". Если это не так, ID фонового актора может быть конкретно указан с помощью параметра '),t("code",[e._v("id")]),e._v(":")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("; Дан фоновый актор `CityVideo` с внешностями `Night` и `Day` (видеоклипы)\n\n; Вывести в качестве дневного фона проигрываемый видеоклип\n@back Day id:CityVideo\n\n; Перейти к ночному фону с эффектом `Ripple` \n@back Night.Ripple id:CityVideo\n\n; Скрыть фон\n@hide CityVideo\n")])])]),t("p",[e._v('Запись актора "MainBackground" создается по умолчанию в диспетчере фоновых ресурсов и не может быть переименована или удалена; однако параметры основных фонов (реализация, pivot, PPU и т. д.) могут быть свободно изменены.')]),e._v(" "),t("h2",{attrs:{id:"позы"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#позы"}},[e._v("#")]),e._v(" Позы")]),e._v(" "),t("p",[e._v("Каждый фон имеет свойство "),t("code",[e._v("Poses")]),e._v(', позволяющее задавать различные именованные состояния("позы").')]),e._v(" "),t("p",[e._v("Название позы может быть использовано в качестве внешности в команде "),t("a",{attrs:{href:"/api/#back",target:"_blank"}},[t("code",[e._v("@back")])]),e._v(" для применения всех параметров, указанных в позе сразу, вместо того, чтобы указывать их по отдельности с помощью команд параметров.")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("; Данная поза `Day` определена для основного фона,\n; применяет все параметры, указанные в состоянии позы.\n\n@back Day\n\n; То же самое, что выше, но для фонового актора с ID `City`\n; и с помощью перехода `DropFade` за 3 секунды.\n@back Day id:City transition:DropFade time:3\n")])])]),t("p",[e._v("Обратите внимание, что когда поза используется в качестве внешности, вы все еще можете переопределить отдельные параметры, например:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("; Данная поза `Day` определена для основного фона,\n; применяет все параметры, указанные в состоянии позы,\n; за исключением оттенка, который переопределён отдельной командой.\n@back Day tint:#ff45cb\n")])])]),t("h2",{attrs:{id:"спрайтовые-фоны"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#спрайтовые-фоны"}},[e._v("#")]),e._v(" Спрайтовые фоны")]),e._v(" "),t("p",[e._v("Спрайтовая реализация акторов фона является наиболее распространенной и простой; она использует один "),t("a",{attrs:{href:"https://docs.unity3d.com/Manual/Sprites",target:"_blank",rel:"noopener noreferrer"}},[e._v("спрайтовый"),t("OutboundLink")],1),e._v(" ассет для представления внешности фона. Источником спрайта может быть изображение в формате "),t("code",[e._v(".jpg")]),e._v(" или "),t("code",[e._v(".png")]),e._v(".")]),e._v(" "),t("h2",{attrs:{id:"видео-фоны"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#видео-фоны"}},[e._v("#")]),e._v(" Видео-фоны")]),e._v(" "),t("p",[e._v("Видео-фоны используют ассеты "),t("a",{attrs:{href:"https://docs.unity3d.com/Manual/class-VideoClip",target:"_blank",rel:"noopener noreferrer"}},[e._v("видеоклипов"),t("OutboundLink")],1),e._v(" ассет для представления внешности фона.")]),e._v(" "),t("p",[e._v("Видео-фоны могут управляться только графическим интерфейсом редактора.")]),e._v(" "),t("p",[e._v("Поддерживаемые видеоформаты для каждой платформы см. в разделе "),t("a",{attrs:{href:"https://docs.unity3d.com/Manual/VideoSources-FileCompatibility.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("документации Unity для видеоресурсов"),t("OutboundLink")],1),e._v(".")]),e._v(" "),t("p",[e._v("Для справки, вот подробные параметры видео фонового видеоклипа, который используется в нашей демо-версии WebGL:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("Container : MPEG-4\nContainer profile : Base Media\nContainer codec ID : isom (isom/iso2/avc1/mp41)\nFormat : AVC\nFormat/Info : Advanced Video Codec\nFormat profile : High@L4\nFormat settings, CABAC : Yes\nFormat settings, RefFrames : 4 frames\nCodec ID : avc1\nCodec ID/Info : Advanced Video Coding\nBit rate : 3 196 kb/s\nWidth : 1 920 pixels\nHeight : 1 080 pixels\nDisplay aspect ratio : 16:9\nFrame rate mode : Constant\nFrame rate : 25.000 FPS\nColor space : YUV\nChroma subsampling : 4:2:0\nBit depth : 8 bits\nScan type : Progressive\nWriting library : x264 core 148 r2795 aaa9aa8\nEncoding settings : cabac=1 / ref=3 / deblock=1:0:0 / analyse=0x3:0x113 / me=hex / subme=7 / psy=1 / psy_rd=1.00:0.00 / mixed_ref=1 / me_range=16 / chroma_me=1 / trellis=1 / 8x8dct=1 / cqm=0 / deadzone=21,11 / fast_pskip=1 / chroma_qp_offset=-2 / threads=12 / lookahead_threads=2 / sliced_threads=0 / nr=0 / decimate=1 / interlaced=0 / bluray_compat=0 / constrained_intra=0 / bframes=3 / b_pyramid=2 / b_adapt=1 / b_bias=0 / direct=1 / weightb=1 / open_gop=0 / weightp=2 / keyint=250 / keyint_min=25 / scenecut=40 / intra_refresh=0 / rc_lookahead=40 / rc=crf / mbtree=1 / crf=23.0 / qcomp=0.60 / qpmin=0 / qpmax=69 / qpstep=4 / ip_ratio=1.40 / aq=1:1.00\n")])])]),t("p",[e._v("А вот настройки импорта Unity для этого видеоклипа:")]),e._v(" "),t("p",[t("img",{attrs:{src:"https://i.gyazo.com/9e6a9cc0bd79bca2c0e8e35666fbdc7f.png",alt:""}})]),e._v(" "),t("p",[e._v("В зависимости от целевой платформы может потребоваться включение перекодирования в настройках импорта видеоклипов.")]),e._v(" "),t("div",{staticClass:"custom-block example"},[t("p",{staticClass:"custom-block-title"},[e._v("ПРИМЕР")]),e._v(" "),t("p",[e._v("В случае возникновения проблем с достижением плавного лупа убедитесь, что видео имеет одинаковые кадры в начале и конце, а также совместимую настройку кодирования; проверьте наш "),t("a",{attrs:{href:"https://github.com/Elringus/VideoLoop",target:"_blank",rel:"noopener noreferrer"}},[e._v("проект с примером зацикленного видео"),t("OutboundLink")],1),e._v(" для справки.")])]),e._v(" "),t("p",[e._v("Имейте в виду, что на WebGL видеоплеер может работать только в потоковом режиме, поэтому все видеоресурсы будут скопированы в папку "),t("code",[e._v("Assets/StreamingAssets/Backgrounds")]),e._v(" при создании проигрывателя WebGL. Папка "),t("strong",[e._v("StreamingAssets")]),e._v(" также появится в выходном каталоге сборки; убедитесь, что вы сохранили ее при публикации сборки, и убедитесь, что ваш веб-сервер позволяет считывать данные из этой папки.")]),e._v(" "),t("h2",{attrs:{id:"посnойные-фоны"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#посnойные-фоны"}},[e._v("#")]),e._v(" Послойные фоны")]),e._v(" "),t("p",[e._v("Послойная реализация позволяет создавать фоны из нескольких спрайтов (слоев), а затем переключать их по отдельности с помощью сценариев Naninovel во время выполнения.")]),e._v(" "),t("p",[e._v("Чтобы создать префаб послойного фона, используйте контекстное меню ассетов "),t("code",[e._v("Create -> Naninovel -> Background -> Layered")]),e._v(". Войдите в "),t("a",{attrs:{href:"https://docs.unity3d.com/Manual/EditingInPrefabMode.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("режим редактирования префаба"),t("OutboundLink")],1),e._v(" для составления слоев. По умолчанию будет создано несколько слоев и групп. Вы можете использовать их или удалить и добавить свои собственные.")]),e._v(" "),t("p",[e._v("Послойные фоны схожи с "),t("RouterLink",{attrs:{to:"/ru/guide/characters.html#layered-characters"}},[e._v("послойными персонажами")]),e._v("; обратитесь к документации для получения дополнительной информации о том, как настроить и управлять ими с помощью сценариев Naninovel.")],1),e._v(" "),t("p",[e._v("Не забывайте, что безымянный параметр в команде "),t("a",{attrs:{href:"/api/#back",target:"_blank"}},[t("code",[e._v("@back")])]),e._v(" ожидает внешность и тип перехода (а не ID и внешность, как в команде "),t("a",{attrs:{href:"/api/#char",target:"_blank"}},[t("code",[e._v("@char")])]),e._v("), поэтому указывайте выражения в композиции слоёв следующим образом:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('; Дан фоновый актор "LayeredForest"\n@back Group>Layer,Other/Group+Layer,-RootLayer.TransitionType id:LayeredForest\n')])])]),t("h2",{attrs:{id:"универсаnьные-фоны"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#универсаnьные-фоны"}},[e._v("#")]),e._v(" Универсальные фоны")]),e._v(" "),t("p",[e._v("Универсальный фон – это наиболее гибкая реализация фонового актора. Он основан на префабе с компонентом "),t("code",[e._v("BackgroundActorBehaviour")]),e._v(", прикрепленным к корневому объекту. Изменения внешности и все остальные фоновые параметры маршрутизируются как "),t("a",{attrs:{href:"https://docs.unity3d.com/Manual/UnityEvents.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("события Unity"),t("OutboundLink")],1),e._v(", что позволяет реализовать поведение управляемого объекта любым удобным вам способом.")]),e._v(" "),t("p",[t("img",{attrs:{src:"https://i.gyazo.com/d8f86c83decfb3c40c8d23602214a743.png",alt:""}})]),e._v(" "),t("p",[e._v("Чтобы создать префаб универсального фона по шаблону, используйте контекстное меню ассета "),t("code",[e._v("Create -> Naninovel -> Background -> Generic")]),e._v(".")]),e._v(" "),t("p",[e._v("Универсальные фоны очень похожи на универсальных персонажей; ознакомьтесь с учебным видео по настройке анимированной 3D-модели в качестве универсального персонажа для одного из возможных примеров использования.")]),e._v(" "),t("p"),t("div",{staticClass:"video-container"},[t("iframe",{attrs:{src:"https://www.youtube-nocookie.com/embed/HPxhR0I1u2Q",frameborder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""}})]),t("p"),e._v(" "),t("h2",{attrs:{id:"фоны-сцен"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#фоны-сцен"}},[e._v("#")]),e._v(" Фоны сцен")]),e._v(" "),t("p",[e._v("Вы можете использовать "),t("a",{attrs:{href:"https://docs.unity3d.com/Manual/CreatingScenes",target:"_blank",rel:"noopener noreferrer"}},[e._v("сцену Unity"),t("OutboundLink")],1),e._v(" в качестве заднего плана с реализацией фона сцены.")]),e._v(" "),t("p",[e._v("Фоны сцен могут управляться только графическим интерфейсом редактора; ресурсы сцен должны храниться в папке проекта "),t("code",[e._v("Assets/Scenes")]),e._v(".")]),e._v(" "),t("p",[e._v("Первым делом создайте новую (или переместите существующую) сцену в папку "),t("code",[e._v("Assets/Scenes")]),e._v(" и убедитесь, что в ней есть хотя бы одна "),t("a",{attrs:{href:"https://docs.unity3d.com/ScriptReference/Camera.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("камера"),t("OutboundLink")],1),e._v(". После загрузки фона сцены Naninovel назначит текстуру рендеринга первой найденной камере в сцене. Затем текстура рендеринга будет назначена фоновому спрайту, представляющему фон внутри пространства сцены Naninovel. Таким образом, фон сцены сможет сосуществовать с другими акторами фонов и персонажей, поддерживать все эффекты перехода фонов и будет масштабируем для обработки различных соотношений сторон дисплея.")]),e._v(" "),t("p",[e._v("Убедитесь, что объекты сцены расположены в пространстве так, чтобы они не перекрывались объектами из других сцен, которые потенциально могут быть загружены одновременно (например, будучи объявлены в одном сценарии Naninovel). Кроме того, имейте в виду, что в случае, если фоновый объект сцены расположен вблизи начала координат глобального пространства ("),t("code",[e._v("x0 y0 z0")]),e._v("), он может быть визуализирован основной камерой Naninovel; чтобы предотвратить это, сместите все объекты сцены относительно глобального источника, либо используйте "),t("code",[e._v("Configuration -> Engine -> Override Objects Layer")]),e._v(" для изоляции связанных с Naninovel объектов с помощью "),t("a",{attrs:{href:"https://docs.unity3d.com/Manual/Layers.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("слоёв"),t("OutboundLink")],1),e._v(".")]),e._v(" "),t("p",[e._v("После завершения настройки сцены создайте новый фоновый актор через меню "),t("code",[e._v("Naninovel -> Configuration -> Backgrounds")]),e._v(", выберите реализацию "),t("code",[e._v("SceneBackground")]),e._v(" и добавьте ассет сцены к ресурсам актора.")]),e._v(" "),t("p",[t("img",{attrs:{src:"https://i.gyazo.com/d69159ab4d93793022018fa8d244f1aa.png",alt:""}})]),e._v(" "),t("p",[e._v("При назначении ресурсов для актора фона сцены соответствующие ассеты должны автоматически добавляться в "),t("a",{attrs:{href:"https://docs.unity3d.com/Manual/BuildSettings.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("настройки сборки"),t("OutboundLink")],1),e._v("; если вы получаете сообщение об ошибке, что ресурс сцены не был добавлен в сборку, попробуйте добавить его вручную.")]),e._v(" "),t("p",[e._v("Теперь вы можете использовать команду "),t("a",{attrs:{href:"/api/#back",target:"_blank"}},[t("code",[e._v("@back")])]),e._v(" для управления созданным фоновым актором сцены, например:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("@back SceneName id:ActorId\n")])])])])}),[],!1,null,null,null);a.default=n.exports}}]);
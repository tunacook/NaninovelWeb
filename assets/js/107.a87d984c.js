(window.webpackJsonp=window.webpackJsonp||[]).push([[107],{390:function(e,t,a){"use strict";a.r(t);var o=a(33),c=Object(o.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"выборы"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#выборы"}},[e._v("#")]),e._v(" Выборы")]),e._v(" "),a("p",[e._v("Данная функция позволяет предоставить пользователю несколько вариантов выбора и перенаправить выполнение скрипта в зависимости от того, какой выбор делает пользователь.")]),e._v(" "),a("p",[a("img",{attrs:{src:"https://i.gyazo.com/023502e43b35caa706c88fd9ab32003d.png",alt:"Выборы"}})]),e._v(" "),a("p",[e._v("Используйте команды "),a("a",{attrs:{href:"/api/#choice",target:"_blank"}},[a("code",[e._v("@choice")])]),e._v(", за которыми следует список выборов и (необязательно) путь "),a("code",[e._v("goto")]),e._v(", чтобы добавить варианты из сценариев Naninovel:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('; Вывести текст, затем сразу же показать варианты и остановите выполнение сценария.\nПродолжить выполнение этого сценария или загрузить другой?[skipInput]\n@choice "Продолжить со следующей строки"\n@choice "Продолжить с указанной отметки" goto:.Labelname\n@choice "Загрузить другой с начала" goto:AnotherScript\n@choice "Загрузить другой с указанного отметки" goto:AnotherScript.LabelName\n@stop\n')])])]),a("p",[e._v("Значение параметра "),a("code",[e._v("goto")]),e._v(" – это путь для перемаршрутизации после того, как пользователь сделает соответствующий выбор. Он задается в следующем формате: "),a("em",[e._v("имя скрипта")]),e._v("."),a("em",[e._v("имя отметки")]),e._v(". Если имя отметки опущено, то указанный сценарий будет воспроизведен с самого начала; если имя сценария опущено, то ссылка будет сделана на метку в воспроизводимом в данный момент сценарии:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("; Загружает и начинает воспроизводить сценарий Naninovel с именем `Script001` с самого начала\ngoto:Script001\n\n; То же самое, что и выше, но начинает воспроизводить с отметки `AfterStorm`\ngoto:Script001.AfterStorm\n\n; Переводит воспроизведение на отметку `Epilogue` в воспроизводимом в данный момент сценарии\ngoto:.Epilogue\n")])])]),a("p",[e._v("Если параметр "),a("code",[e._v("goto")]),e._v(" не указан, выполнение текущего сценария продолжится со следующей строки.")]),e._v(" "),a("p",[e._v("Акторы обработчика выбора используются для обработки команд "),a("a",{attrs:{href:"/api/#choice",target:"_blank"}},[a("code",[e._v("@choice")])]),e._v(". Вы можете добавлять, редактировать и удалять обработчики выборов с помощью диспетчера выборов, доступного через контекстное меню "),a("code",[e._v("Naninovel -> Resources -> Choice Handlers")]),e._v(".")]),e._v(" "),a("p",[e._v("Поведение обработчиков выборов можно настроить с помощью контекстного меню "),a("code",[e._v("Naninovel -> Configuration -> Choice Handlers")]),e._v("; доступные параметры см. в "),a("RouterLink",{attrs:{to:"/ru/guide/configuration.html#choice-handlers"}},[e._v("руководстве по конфигурации")]),e._v(".")],1),e._v(" "),a("h2",{attrs:{id:"кнопки-выбора"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#кнопки-выбора"}},[e._v("#")]),e._v(" Кнопки выбора")]),e._v(" "),a("p",[e._v("Команда "),a("a",{attrs:{href:"/api/#choice",target:"_blank"}},[a("code",[e._v("@choice")])]),e._v(" принимает опциональный параметр "),a("code",[e._v("button")]),e._v(', указывающий путь (относительно папки "Resources") к пользовательскому префабу, представляющей объект варианта выбора.')]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("@choice handler:ButtonArea button:MapButtons/Home pos:-300,-300 goto:.HomeScene\n")])])]),a("p",[e._v("– здесь мы используем обработчик выбора, поддерживающий позиционирование, чтобы представить интересующую нас точку на импровизированной карте, где параметр "),a("code",[e._v("button")]),e._v(" указывает на префаб, состоящий из кнопки, наложенной поверх изображения. Префаб хранится здесь: "),a("code",[e._v("Assets/Resources/MapButtons/Home.prefab")]),e._v(".")]),e._v(" "),a("p",[e._v("Чтобы создать сборную кнопку выбора из шаблона, используйте контекстное меню ассетов "),a("code",[e._v("Create -> Naninovel -> Choice Button")]),e._v(".")]),e._v(" "),a("p",[a("img",{attrs:{src:"https://i.gyazo.com/c2bd4abaa0275f7cdd37c56fd2ff0dec.png",alt:""}})]),e._v(" "),a("p",[e._v("Не забывайте "),a("strong",[e._v('хранить пользовательские кнопки выбора в папке "Resources"')]),e._v(", иначе они не смогут загружаться по запросу.")]),e._v(" "),a("p",[e._v("Если параметр "),a("code",[e._v("button")]),e._v(" команды "),a("a",{attrs:{href:"/api/#choice",target:"_blank"}},[a("code",[e._v("@choice")])]),e._v(" не задан, используется префаб кнопки по умолчанию.")]),e._v(" "),a("p",[e._v("Чтобы использовать другой текстовый компонент (например, TMPro) для текста выбора, используйте "),a("code",[e._v("On Summary TextChanged")]),e._v(" "),a("a",{attrs:{href:"https://docs.unity3d.com/Manual/UnityEvents",target:"_blank",rel:"noopener noreferrer"}},[e._v("(событие Unity"),a("OutboundLink")],1),e._v(" компонента кнопки выбора).")]),e._v(" "),a("p",[a("img",{attrs:{src:"https://i.gyazo.com/8810c51b336bfd653efcde591fe1c41f.png",alt:""}})]),e._v(" "),a("h2",{attrs:{id:"списочный-обработчик-выбора"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#списочный-обработчик-выбора"}},[e._v("#")]),e._v(" Списочный обработчик выбора")]),e._v(" "),a("p",[e._v("Обработчик списка используется по умолчанию. Он располагает кнопки выбора внутри горизонтальной панели компоновки и игнорирует параметр "),a("code",[e._v("pos")]),e._v(" команды "),a("a",{attrs:{href:"/api/#choice",target:"_blank"}},[a("code",[e._v("@choice")])]),e._v(".")]),e._v(" "),a("h2",{attrs:{id:"обработчик-выбора-по-обnасти"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#обработчик-выбора-по-обnасти"}},[e._v("#")]),e._v(" Обработчик выбора по области")]),e._v(" "),a("p",[e._v("В отличие от списочного обработчика, областной не навязывает какой-либо конкретный макет и позволяет вручную устанавливать позиции добавленных кнопок выбора с помощью параметра "),a("code",[e._v("pos")]),e._v(". Например, вот один из способов создания интерактивной карты с командами выбора и обработчиком областей:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("# Map\n@back Map\n@hidePrinter\n@choice handler:ButtonArea button:MapButtons/Home pos:-300,-300 goto:.HomeScene\n@choice handler:ButtonArea button:MapButtons/Shop pos:300,200 goto:.ShopScene\n@stop\n\n# HomeScene\n@back Home\nHome, sweet home!\n@goto .Map\n\n# ShopScene\n@back Shop\nDon't forget about cucumbers!\n@goto .Map\n")])])]),a("p"),a("div",{staticClass:"video-container"},[a("iframe",{attrs:{src:"https://www.youtube-nocookie.com/embed/cNRNgk5HhKQ",frameborder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""}})]),a("p"),e._v(" "),a("h2",{attrs:{id:"добавnение-поnьзоватеnьских-обработчиков-выбора"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#добавnение-поnьзоватеnьских-обработчиков-выбора"}},[e._v("#")]),e._v(" Добавление пользовательских обработчиков выбора")]),e._v(" "),a("p",[e._v("Вы можете добавить пользовательские обработчики выбора на основе встроенных шаблонов или создать новые обработчики с нуля. Например, давайте настроим встроенный шаблон "),a("code",[e._v("ButtonArea")]),e._v(".")]),e._v(" "),a("p",[e._v("Используйте контекстное меню ассетов "),a("code",[e._v("Create -> Naninovel -> Choice Handler -> ButtonArea")]),e._v(", чтобы создать префаб обработчика кнопки на за пределами пакета Naninovel, например, в папке "),a("code",[e._v("Assets/ChoiceHandlers")]),e._v(".")]),e._v(" "),a("p",[e._v("Отредактируйте обработчик: измените шрифт, текстуры, добавьте анимацию и т.д. Дополнительные сведения о доступных инструментах редактирования пользовательского интерфейса см. в "),a("a",{attrs:{href:"https://docs.unity3d.com/Packages/com.unity.ugui@latest",target:"_blank",rel:"noopener noreferrer"}},[e._v("документации Unity"),a("OutboundLink")],1),e._v(".")]),e._v(" "),a("p",[e._v("Сделайте обработчик доступным для ресурсов движка с помощью графического менеджера обработчиков выбора, к которому можно обратиться через контекстное меню редактора "),a("code",[e._v("Naninovel -> Resources -> Choice Handlers")]),e._v(". Добавьте новую запись с помощью кнопки "),a("code",[e._v("+")]),e._v(" (плюс), введите ID актора (может отличаться от имени префаба) и дважды щелкните запись, чтобы открыть настройки актора. Перетащите префаб обработчика в поле "),a("code",[e._v("Resource")]),e._v(".")]),e._v(" "),a("p",[a("video",{staticClass:"video",attrs:{loop:"",autoplay:"",muted:""},domProps:{muted:!0}},[a("source",{attrs:{src:"https://i.gyazo.com/cb3a0ff7f22b22cec6546acb388719fc.mp4",type:"video/mp4"}})])]),e._v(" "),a("p",[e._v("Теперь вы можете использовать новый обработчик выбора, указав его ID в параметре "),a("code",[e._v("handler")]),e._v(" команд "),a("a",{attrs:{href:"/api/#choice",target:"_blank"}},[a("code",[e._v("@choice")])]),e._v(".")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('@choice "Текст выбора" handler:MyNewHandler\n')])])]),a("p",[e._v("Кроме того, можно создать обработчик выбора с нуля, вручную реализовав интерфейс "),a("code",[e._v("IChoiceHandlerActor")]),e._v(". См. руководство по "),a("RouterLink",{attrs:{to:"/ru/guide/custom-actor-implementations.html"}},[e._v("реализации пользовательских акторов")]),e._v(" для получения дополнительной информации.")],1)])}),[],!1,null,null,null);t.default=c.exports}}]);
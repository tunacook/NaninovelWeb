(window.webpackJsonp=window.webpackJsonp||[]).push([[57],{429:function(e,t,a){"use strict";a.r(t);var o=a(33),c=Object(o.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"選択肢"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#選択肢"}},[e._v("#")]),e._v(" 選択肢")]),e._v(" "),a("p",[e._v("この機能は、ユーザーにいくつかの選択肢を提示し、ユーザーの選択に応じてスクリプトの実行を再ルーティングできます。")]),e._v(" "),a("p",[a("img",{attrs:{src:"https://i.gyazo.com/023502e43b35caa706c88fd9ab32003d.png",alt:"Choices"}})]),e._v(" "),a("p",[a("a",{attrs:{href:"/api/#choice",target:"_blank"}},[a("code",[e._v("@choice")])]),e._v(" コマンドに続けて選択肢の詳細を記述し、任意で選択肢に追加するnaninovelスクリプトの "),a("code",[e._v("goto")]),e._v(" パスを記述します:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('; テキストを表示し、すぐに選択肢を表示してスクリプトの実行を停止。\n; このスクリプトの実行を続けるかそれとも、...？[skipInput]\n@choice "Continue from the next line"\n@choice "Continue from the specified label" goto:.Labelname\n@choice "Load another from start" goto:AnotherScript\n@choice "Load another from label" goto:AnotherScript.LabelName\n@stop\n')])])]),a("p",[a("code",[e._v("goto")]),e._v(" パラメータの値は、ユーザーが対応する選択肢を選択したときに再ルーティングするパスです。次の形式で指定します:"),a("em",[e._v("ScriptName")]),e._v("."),a("em",[e._v("LabelName")]),e._v(" 。ラベル名を省略すると、指定したスクリプトが最初から再生されます。スクリプト名を省略すると、現在再生されているスクリプトのラベルを参照します:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("; `Script001` というnaninovel スクリプトをロードし、最初から実行。\ngoto:Script001\n\n; 上記に加えて、`AfterStorm` ラベルから実行を開始。\ngoto:Script001.AfterStorm\n\n; 現在実行中のスクリプトの `Epilogue` ラベルへジャンプする。\ngoto:.Epilogue\n")])])]),a("p",[a("code",[e._v("goto")]),e._v("パラメータが指定されていない場合、現在のスクリプトの次の行から実行を継続します。")]),e._v(" "),a("p",[a("a",{attrs:{href:"/api/#choice",target:"_blank"}},[a("code",[e._v("@choice")])]),e._v(" コマンドを処理するために、選択肢ハンドラアクターが使用されます。 "),a("code",[e._v("Naninovel -> Resources -> Choice Handlers")]),e._v(" コンテキストメニューから選択肢マネージャーを使用して、選択肢ハンドラーの追加、編集、削除ができます。")]),e._v(" "),a("p",[e._v("選択肢ハンドラーの挙動はコンテキストメニュー "),a("code",[e._v("Naninovel -> Configuration -> Choice Handlers")]),e._v(" から設定できます。可能なオプションについては "),a("RouterLink",{attrs:{to:"/ja/guide/configuration.html#choice-handlers"}},[e._v("コンフィグガイド")]),e._v(" をご覧ください。")],1),e._v(" "),a("h2",{attrs:{id:"選択ボタン"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#選択ボタン"}},[e._v("#")]),e._v(" 選択ボタン")]),e._v(" "),a("p",[a("a",{attrs:{href:"/api/#choice",target:"_blank"}},[a("code",[e._v("@choice")])]),e._v(' コマンドでは、 "Resources" フォルダーからの相対パスを指定した任意の '),a("code",[e._v("button")]),e._v(" パラメーターを使用できます。これは選択肢オブジェクトを表すカスタムプレハブへのパスです。")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("@choice handler:ButtonArea button:MapButtons/Home pos:-300,-300 goto:.HomeScene\n")])])]),a("p",[e._v("— ここでは、配置をサポートする選択ハンドラーを使用して、即興マップ上の任意のポイントを表します。ここで "),a("code",[e._v("button")]),e._v(" パラメーターは、画像で覆ったボタンで構成されるプレハブを指します。プレハブは  "),a("code",[e._v("Assets/Resources/MapButtons/Home.prefab")]),e._v(" に保存されています。")]),e._v(" "),a("p",[e._v("テンプレートから選択ボタンプレハブを作成するには、コンテキストメニューで "),a("code",[e._v("Create -> Naninovel -> Choice Button")]),e._v(" アセットを使用します。")]),e._v(" "),a("p",[a("img",{attrs:{src:"https://i.gyazo.com/c2bd4abaa0275f7cdd37c56fd2ff0dec.png",alt:""}})]),e._v(" "),a("p",[e._v("必ず "),a("strong",[e._v('"Resources" フォルダーにカスタム選択ボタンを保存')]),e._v(" してください。そうしないとリクエストされた際に読み込めません。")]),e._v(" "),a("p",[a("a",{attrs:{href:"/api/#choice",target:"_blank"}},[a("code",[e._v("@choice")])]),e._v(" コマンドの "),a("code",[e._v("button")]),e._v(" パラメーターが指定されていない場合、デフォルトのボタンプレハブが使用されます。")]),e._v(" "),a("p",[e._v("選択肢のテキストに別の種類のテキストコンポーネント(例えばTMProなど)を使用したい場合、選択ボタンコンポーネントの "),a("code",[e._v("On Summary Text Changed")]),e._v(" "),a("a",{attrs:{href:"https://docs.unity3d.com/Manual/UnityEvents",target:"_blank",rel:"noopener noreferrer"}},[e._v("Unity イベント"),a("OutboundLink")],1),e._v(" を使用してください。")]),e._v(" "),a("p",[a("img",{attrs:{src:"https://i.gyazo.com/8810c51b336bfd653efcde591fe1c41f.png",alt:""}})]),e._v(" "),a("h2",{attrs:{id:"buttonlist-選択肢ハンドラー"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#buttonlist-選択肢ハンドラー"}},[e._v("#")]),e._v(" ButtonList 選択肢ハンドラー")]),e._v(" "),a("p",[e._v("ボタンリストハンドラーはデフォルトで使用されます。水平レイアウトパネル内に選択ボタンを保存し、 "),a("a",{attrs:{href:"/api/#choice",target:"_blank"}},[a("code",[e._v("@choice")])]),e._v(" コマンドの "),a("code",[e._v("pos")]),e._v(" パラメーターは無視します。")]),e._v(" "),a("h2",{attrs:{id:"buttonarea-選択肢ハンドラー"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#buttonarea-選択肢ハンドラー"}},[e._v("#")]),e._v(" ButtonArea 選択肢ハンドラー")]),e._v(" "),a("p",[e._v("ボタンリストとは異なり、ボタンエリアは特定のレイアウトを強制せず、追加された選択ボタンの位置を "),a("code",[e._v("pos")]),e._v(" パラメーターで手動で設定できます。たとえば次の例は、選択コマンドとボタンエリアハンドラーでインタラクティブマップを作成する方法の1つです:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("# Map\n@back Map\n@hidePrinter\n@choice handler:ButtonArea button:MapButtons/Home pos:-300,-300 goto:.HomeScene\n@choice handler:ButtonArea button:MapButtons/Shop pos:300,200 goto:.ShopScene\n@stop\n\n# HomeScene\n@back Home\nHome, sweet home!\n@goto .Map\n\n# ShopScene\n@back Shop\nDon't forget about cucumbers!\n@goto .Map\n")])])]),a("p"),a("div",{staticClass:"video-container"},[a("iframe",{attrs:{src:"https://www.youtube-nocookie.com/embed/cNRNgk5HhKQ",frameborder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""}})]),a("p"),e._v(" "),a("h2",{attrs:{id:"選択肢ハンドラーの追加"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#選択肢ハンドラーの追加"}},[e._v("#")]),e._v(" 選択肢ハンドラーの追加")]),e._v(" "),a("p",[e._v("組み込みテンプレートからカスタム選択肢ハンドラーを追加するか、新しいハンドラーを最初から作成できます。例として、組み込みの "),a("code",[e._v("ButtonArea")]),e._v(" テンプレートをカスタマイズしてみましょう。")]),e._v(" "),a("p",[e._v("コンテキストメニューの "),a("code",[e._v("Create -> Naninovel -> Choice Handler -> ButtonArea")]),e._v(" アセットを使用してボタンエリアハンドラーをNaninovelパッケージ以外の場所に作成します。例えば "),a("code",[e._v("Assets/ChoiceHandlers")]),e._v(" などです。")]),e._v(" "),a("p",[e._v("ハンドラーを編集します: フォント、テクスチャの変更、アニメーションの追加など。利用可能なUI構築ツールの詳細については、"),a("a",{attrs:{href:"https://docs.unity3d.com/Packages/com.unity.ugui@latest",target:"_blank",rel:"noopener noreferrer"}},[e._v("Unity ドキュメント"),a("OutboundLink")],1),e._v("をご覧ください。")]),e._v(" "),a("p",[e._v("エディターのコンテキストメニューから "),a("code",[e._v("Naninovel -> Resources -> Choice Handlers")]),e._v(" へアクセスし、選択ハンドラーマネージャーGUIを使用して、ハンドラーをエンジンリソースに公開します。  "),a("code",[e._v("+")]),e._v(" （プラス）ボタンで新しいレコードを追加し、アクターID（プレハブ名とは異なる場合があります）を入力し、レコードをダブルクリックしてアクター設定を開きます。ハンドラープレハブを"),a("code",[e._v("Resource")]),e._v(" フィールドにドラッグアンドドロップします。")]),e._v(" "),a("p",[a("video",{staticClass:"video",attrs:{loop:"",autoplay:"",muted:""},domProps:{muted:!0}},[a("source",{attrs:{src:"https://i.gyazo.com/cb3a0ff7f22b22cec6546acb388719fc.mp4",type:"video/mp4"}})])]),e._v(" "),a("p",[e._v("これで "),a("a",{attrs:{href:"/api/#choice",target:"_blank"}},[a("code",[e._v("@choice")])]),e._v(" の "),a("code",[e._v("handler")]),e._v(" パラメーターにIDを指定して、新しい選択肢ハンドラーを利用できます。")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('@choice "Choice summary text." handler:MyNewHandler\n')])])]),a("p",[a("code",[e._v("IChoiceHandlerActor")]),e._v(" インターフェイスを手動で実装することで、選択肢ハンドラを最初から作成することもできます。詳細は、"),a("RouterLink",{attrs:{to:"/ja/guide/custom-actor-implementations.html"}},[e._v("カスタムアクターの実装")]),e._v(" のガイドを参照してください。")],1)])}),[],!1,null,null,null);t.default=c.exports}}]);